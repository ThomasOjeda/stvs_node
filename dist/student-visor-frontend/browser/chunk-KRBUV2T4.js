import{a as Q,b as D,c as Zt,d as ae}from"./chunk-HB4Z7TKK.js";import{a as A,c as R}from"./chunk-LRCNYBC7.js";import"./chunk-7BKYMTEO.js";import{b as st,c as te,d as mt,e as ee,f as ie,g as ne,h as re}from"./chunk-X3P6VRX6.js";import{$ as T,A as r,Aa as Tt,Ab as ot,B as F,C as ut,Ca as V,D as ft,Da as Mt,Ea as xt,Eb as Jt,F as q,Fa as Ot,Fb as Kt,G as _,Gb as Wt,H as P,Ha as wt,I as j,J as k,K as H,L as _t,Lb as lt,M as s,N,O as d,Pa as x,Qa as z,S as bt,Sb as Xt,Tb as W,U as c,V as h,Wa as rt,Xa as At,aa as S,ab as Pt,ba as G,bb as Dt,ca as gt,cb as Ut,d as ht,da as St,ea as It,g as Ct,ga as yt,gb as I,h as et,hb as O,i as vt,j as g,jb as y,k as it,kb as at,mb as Nt,n as E,na as Et,nb as Vt,o as B,ob as Rt,pa as nt,pb as qt,qb as Gt,rb as Lt,s as a,sa as ct,sb as Yt,t as C,ta as Bt,tb as $t,ua as b,ub as jt,va as M,vb as kt,w as p,wa as Ft,wb as Ht,x as l,xa as K,xb as zt,ya as u,yb as Qt,z as n,zb as w}from"./chunk-XFNI64LT.js";var L=(()=>{class e{constructor(t){this.httpServ=t}getUnits(t){return this.httpServ.post(`${W.apiUrl}/api/v1/datacat/units`,{year:t})}getOffers(t,i){return this.httpServ.post(`${W.apiUrl}/api/v1/datacat/unitoffers`,{year:t,unit:i})}getGenders(){return this.httpServ.get(`${W.apiUrl}/api/v1/datacat/genders`)}getFileTypes(t){return this.httpServ.post(`${W.apiUrl}/api/v1/datacat/filetypes`,{year:t})}static{this.\u0275fac=function(i){return new(i||e)(vt(yt))}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function _e(e,m){if(e&1&&(n(0,"mat-option",4),s(1),r()),e&2){let t=m.$implicit;l("value",t),a(),d(" ",t," ")}}function be(e,m){e&1&&(n(0,"mat-error"),s(1," Campo "),n(2,"strong"),s(3,"requerido"),r()())}function ge(e,m){if(e&1&&(n(0,"mat-option",4),s(1),r()),e&2){let t=m.$implicit;l("value",t),a(),d(" ",t," ")}}function Se(e,m){e&1&&(n(0,"mat-error"),s(1," Campo "),n(2,"strong"),s(3,"requerido"),r()())}function Ie(e,m){if(e&1&&(n(0,"mat-option",4),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function ye(e,m){if(e&1&&(n(0,"mat-option",4),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function Ee(e,m){if(e&1&&(n(0,"mat-option",4),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function Be(e,m){if(e&1&&(n(0,"mat-option",4),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function Fe(e,m){if(e&1&&(n(0,"mat-option",4),s(1),c(2,"titlecase"),r()),e&2){let t=m.$implicit;l("value",t._id),a(),d(" ",h(2,2,t.label)," ")}}var oe=(()=>{class e{constructor(t,i){this.filesServ=t,this.dataCatServ=i,this.yearAInputControl=new u(void 0,[b.required]),this.yearBInputControl=new u({value:void 0,disabled:!0},[b.required]),this.unitAInputControl=new u({value:void 0,disabled:!0}),this.unitBInputControl=new u({value:void 0,disabled:!0}),this.genderInputControl=new u({value:void 0,disabled:!1}),this.offerAInputControl=new u({value:void 0,disabled:!0}),this.offerBInputControl=new u({value:void 0,disabled:!0}),this.availableStartYears=[],this.availableEndYears=[],this.availableAUnits=[],this.availableBUnits=[],this.availableStartOffers=[],this.availableEndOffers=[],this.availableGenders=[]}ngOnInit(){this.yearAInputControl.valueChanges.subscribe(t=>{this.yearAValueChanged(t)}),this.unitAInputControl.valueChanges.subscribe(t=>{this.unitAChanged(t)}),this.yearBInputControl.valueChanges.subscribe(t=>{this.yearBValueChanged(t)}),this.unitBInputControl.valueChanges.subscribe(t=>{this.unitBChanged(t)}),this.transformationBody.addControl("yearA",this.yearAInputControl),this.transformationBody.addControl("yearB",this.yearBInputControl),this.transformationBody.addControl("unitA",this.unitAInputControl),this.transformationBody.addControl("unitB",this.unitBInputControl),this.transformationBody.addControl("sex",this.genderInputControl),this.transformationBody.addControl("offerA",this.offerAInputControl),this.transformationBody.addControl("offerB",this.offerBInputControl),this.filesServ.filesQuery(void 0,A.STUDENT_INSCRIPTIONS).subscribe(t=>{this.availableStartYears=t.result.map(i=>i.year).sort()}),this.dataCatServ.getGenders().subscribe(t=>{this.availableGenders=t.result,this.availableGenders.unshift({_id:void 0,label:"Sin filtro"})})}yearAValueChanged(t){this.reconfigureUnitAInput(t),this.reconfigureYearBInput(t)}yearBValueChanged(t){this.reconfigureUnitBInput(t)}unitAChanged(t){this.reconfigureOfferAInput(t)}unitBChanged(t){this.reconfigureOfferBInput(t)}reconfigureYearBInput(t){this.yearBInputControl.setValue(void 0),this.yearBInputControl.disable({emitEvent:!1}),t&&(this.availableEndYears=this.availableStartYears.slice(this.availableStartYears.lastIndexOf(t)+1),this.yearBInputControl.enable({emitEvent:!1}))}reconfigureUnitAInput(t){this.unitAInputControl.setValue(void 0),this.unitAInputControl.disable({emitEvent:!1}),t&&this.dataCatServ.getUnits(t).subscribe(i=>{this.availableAUnits=i.result.sort(),this.availableAUnits.unshift(void 0),this.unitAInputControl.enable({emitEvent:!1})})}reconfigureUnitBInput(t){this.unitBInputControl.setValue(void 0),this.unitBInputControl.disable({emitEvent:!1}),t&&this.dataCatServ.getUnits(t).subscribe(i=>{this.availableBUnits=i.result.sort(),this.availableBUnits.unshift(void 0),this.unitBInputControl.enable({emitEvent:!1})})}reconfigureOfferAInput(t){this.offerAInputControl.setValue(void 0),this.offerAInputControl.disable({emitEvent:!1}),this.yearAInputControl.value&&t&&this.dataCatServ.getOffers(this.yearAInputControl.value,t).subscribe(i=>{this.availableStartOffers=i.result.sort(),this.availableStartOffers.unshift(void 0),this.offerAInputControl.enable({emitEvent:!1})})}reconfigureOfferBInput(t){this.offerBInputControl.setValue(void 0),this.offerBInputControl.disable({emitEvent:!1}),this.yearBInputControl.value&&t&&this.dataCatServ.getOffers(this.yearBInputControl.value,t).subscribe(i=>{this.availableEndOffers=i.result.sort(),this.availableEndOffers.unshift(void 0),this.offerBInputControl.enable({emitEvent:!1})})}static{this.\u0275fac=function(i){return new(i||e)(C(R),C(L))}}static{this.\u0275cmp=g({type:e,selectors:[["app-student-movements-form"]],inputs:{transformationBody:"transformationBody"},decls:38,vars:16,consts:[[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["panelClass","custom-select-panel",3,"formControl"],[3,"value"]],template:function(i,o){i&1&&(n(0,"section")(1,"mat-form-field")(2,"mat-label"),s(3,"A\xF1o inicio"),r(),n(4,"mat-select",0),p(5,_e,2,2,"mat-option",1),r(),p(6,be,4,0,"mat-error",2),r(),n(7,"mat-form-field")(8,"mat-label"),s(9,"A\xF1o fin"),r(),n(10,"mat-select",0),p(11,ge,2,2,"mat-option",1),r(),p(12,Se,4,0,"mat-error",2),r(),n(13,"mat-form-field")(14,"mat-label"),s(15,"Unidad inicio"),r(),n(16,"mat-select",3),p(17,Ie,3,4,"mat-option",1),r()(),n(18,"mat-form-field")(19,"mat-label"),s(20,"Unidad fin"),r(),n(21,"mat-select",3),p(22,ye,3,4,"mat-option",1),r()(),n(23,"mat-form-field")(24,"mat-label"),s(25,"Carrera inicio"),r(),n(26,"mat-select",3),p(27,Ee,3,4,"mat-option",1),r()(),n(28,"mat-form-field")(29,"mat-label"),s(30,"Carrera fin"),r(),n(31,"mat-select",3),p(32,Be,3,4,"mat-option",1),r()(),n(33,"mat-form-field")(34,"mat-label"),s(35,"Sexo"),r(),n(36,"mat-select",3),p(37,Fe,3,4,"mat-option",1),r()()()),i&2&&(a(4),l("formControl",o.yearAInputControl),a(),l("ngForOf",o.availableStartYears),a(),l("ngIf",o.yearAInputControl.hasError("required")),a(4),l("formControl",o.yearBInputControl),a(),l("ngForOf",o.availableEndYears),a(),l("ngIf",o.yearBInputControl.hasError("required")),a(4),l("formControl",o.unitAInputControl),a(),l("ngForOf",o.availableAUnits),a(4),l("formControl",o.unitBInputControl),a(),l("ngForOf",o.availableBUnits),a(4),l("formControl",o.offerAInputControl),a(),l("ngForOf",o.availableStartOffers),a(4),l("formControl",o.offerBInputControl),a(),l("ngForOf",o.availableEndOffers),a(4),l("formControl",o.genderInputControl),a(),l("ngForOf",o.availableGenders))},dependencies:[T,S,M,V,y,I,O,w,x,G],styles:["section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;justify-content:center;column-gap:2rem}.mat-mdc-form-field[_ngcontent-%COMP%]{min-width:0}"]})}}return e})();function Te(e,m){if(e&1&&(n(0,"mat-option",5),s(1),r()),e&2){let t=m.$implicit;l("value",t),a(),d(" ",t," ")}}function Me(e,m){e&1&&(n(0,"mat-error"),s(1," Campo "),n(2,"strong"),s(3,"requerido"),r()())}function xe(e,m){if(e&1&&(n(0,"mat-option",5),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function Oe(e,m){if(e&1&&(n(0,"mat-option",5),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function we(e,m){if(e&1&&(n(0,"mat-option",5),s(1),c(2,"titlecase"),r()),e&2){let t=m.$implicit;l("value",t._id),a(),d(" ",h(2,2,t.label)," ")}}var le=(()=>{class e{constructor(t,i){this.filesServ=t,this.dataCatServ=i,this.yearInputControl=new u(null,[b.required]),this.unitInputControl=new u({value:void 0,disabled:!0}),this.offerInputControl=new u({value:void 0,disabled:!0}),this.genderInputControl=new u,this.availableYears=[],this.availableUnits=[],this.availableOffers=[],this.availableGenders=[]}ngOnInit(){this.transformationBody.addControl("year",this.yearInputControl),this.transformationBody.addControl("unit",this.unitInputControl),this.transformationBody.addControl("offer",this.offerInputControl),this.transformationBody.addControl("sex",this.genderInputControl),this.genderInputControl.setValue(void 0),this.filesServ.filesQuery(void 0,A.STUDENT_INSCRIPTIONS).subscribe(t=>{this.availableYears=t.result.map(i=>i.year).sort()}),this.dataCatServ.getGenders().subscribe(t=>{this.availableGenders=t.result,this.availableGenders.unshift({_id:void 0,label:"Sin filtro"})})}reconfigureUnitInput(t){this.unitInputControl.disable(),this.unitInputControl.setValue(void 0),this.offerInputControl.disable(),this.offerInputControl.setValue(void 0),this.dataCatServ.getUnits(t).subscribe(i=>{this.unitInputControl.setValue(void 0),this.availableUnits=i.result.sort(),this.availableUnits.unshift(void 0),this.unitInputControl.enable()})}reconfigureOfferInput(t){this.offerInputControl.disable(),this.offerInputControl.setValue(void 0),this.yearInputControl.value&&t&&this.dataCatServ.getOffers(this.yearInputControl.value,t).subscribe(i=>{this.offerInputControl.setValue(void 0),this.availableOffers=i.result.sort(),this.availableOffers.unshift(void 0),this.offerInputControl.enable()})}static{this.\u0275fac=function(i){return new(i||e)(C(R),C(L))}}static{this.\u0275cmp=g({type:e,selectors:[["app-student-inscriptions-form"]],inputs:{transformationBody:"transformationBody"},decls:22,vars:9,consts:[[3,"valueChange","formControl"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["panelClass","custom-select-panel",3,"valueChange","formControl"],["panelClass","custom-select-panel",3,"formControl"],[3,"value"]],template:function(i,o){i&1&&(n(0,"section")(1,"mat-form-field")(2,"mat-label"),s(3,"A\xF1o"),r(),n(4,"mat-select",0),_("valueChange",function(v){return o.reconfigureUnitInput(v)}),p(5,Te,2,2,"mat-option",1),r(),p(6,Me,4,0,"mat-error",2),r(),n(7,"mat-form-field")(8,"mat-label"),s(9,"Unidad"),r(),n(10,"mat-select",3),_("valueChange",function(v){return o.reconfigureOfferInput(v)}),p(11,xe,3,4,"mat-option",1),r()(),n(12,"mat-form-field")(13,"mat-label"),s(14,"Carrera"),r(),n(15,"mat-select",4),p(16,Oe,3,4,"mat-option",1),r()(),n(17,"mat-form-field")(18,"mat-label"),s(19,"Sexo"),r(),n(20,"mat-select",4),p(21,we,3,4,"mat-option",1),r()()()),i&2&&(a(4),l("formControl",o.yearInputControl),a(),l("ngForOf",o.availableYears),a(),l("ngIf",o.yearInputControl.hasError("required")),a(4),l("formControl",o.unitInputControl),a(),l("ngForOf",o.availableUnits),a(4),l("formControl",o.offerInputControl),a(),l("ngForOf",o.availableOffers),a(4),l("formControl",o.genderInputControl),a(),l("ngForOf",o.availableGenders))},dependencies:[T,S,M,V,y,I,O,w,x,G],styles:["section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;justify-content:center;column-gap:2rem}.mat-mdc-form-field[_ngcontent-%COMP%]{min-width:0}"]})}}return e})();function Ae(e,m){if(e&1&&(n(0,"mat-option",5),s(1),r()),e&2){let t=m.$implicit;l("value",t),a(),d(" ",t," ")}}function Pe(e,m){e&1&&(n(0,"mat-error"),s(1," Campo "),n(2,"strong"),s(3,"requerido"),r()())}function De(e,m){if(e&1&&(n(0,"mat-option",5),s(1),r()),e&2){let t=m.$implicit;l("value",t),a(),d(" ",t," ")}}function Ue(e,m){e&1&&(n(0,"mat-error"),s(1," Campo "),n(2,"strong"),s(3,"requerido"),r()())}function Ne(e,m){if(e&1&&(n(0,"mat-option",5),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function Ve(e,m){if(e&1&&(n(0,"mat-option",5),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function Re(e,m){if(e&1&&(n(0,"mat-option",5),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function qe(e,m){if(e&1&&(n(0,"mat-option",5),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function Ge(e,m){e&1&&(n(0,"mat-error"),s(1," Campo "),n(2,"strong"),s(3,"requerido"),r()())}function Le(e,m){if(e&1&&(n(0,"mat-option",5),s(1),c(2,"titlecase"),r()),e&2){let t=m.$implicit;l("value",t._id),a(),d(" ",h(2,2,t.label)," ")}}var se=(()=>{class e{constructor(t,i){this.filesServ=t,this.dataCatServ=i,this.yearAInputControl=new u(void 0,[b.required]),this.yearBInputControl=new u({value:void 0,disabled:!0},[b.required]),this.unitAInputControl=new u({value:void 0,disabled:!0}),this.unitBInputControl=new u({value:void 0,disabled:!0}),this.genderInputControl=new u({value:void 0,disabled:!1}),this.offerAInputControl=new u({value:void 0,disabled:!0}),this.offerBInputControl=new u({value:void 0,disabled:!0}),this.modeInputControl=new u({value:void 0,disabled:!1},[b.required]),this.availableStartYears=[],this.availableEndYears=[],this.availableAUnits=[],this.availableBUnits=[],this.availableStartOffers=[],this.availableEndOffers=[],this.availableGenders=[]}ngOnInit(){this.yearAInputControl.valueChanges.subscribe(t=>{this.yearAValueChanged(t)}),this.unitAInputControl.valueChanges.subscribe(t=>{this.unitAChanged(t)}),this.yearBInputControl.valueChanges.subscribe(t=>{this.yearBValueChanged(t)}),this.unitBInputControl.valueChanges.subscribe(t=>{this.unitBChanged(t)}),this.transformationBody.addControl("yearA",this.yearAInputControl),this.transformationBody.addControl("yearB",this.yearBInputControl),this.transformationBody.addControl("unitA",this.unitAInputControl),this.transformationBody.addControl("unitB",this.unitBInputControl),this.transformationBody.addControl("sex",this.genderInputControl),this.transformationBody.addControl("offerA",this.offerAInputControl),this.transformationBody.addControl("offerB",this.offerBInputControl),this.transformationBody.addControl("destMode",this.modeInputControl),this.filesServ.filesQuery(void 0,A.STUDENT_INSCRIPTIONS).subscribe(t=>{this.availableStartYears=t.result.map(i=>i.year).sort()}),this.dataCatServ.getGenders().subscribe(t=>{this.availableGenders=t.result,this.availableGenders.unshift({_id:void 0,label:"Sin filtro"})})}yearAValueChanged(t){this.reconfigureUnitAInput(t),this.reconfigureYearBInput(t)}yearBValueChanged(t){this.reconfigureUnitBInput(t)}unitAChanged(t){this.reconfigureOfferAInput(t)}unitBChanged(t){this.reconfigureOfferBInput(t)}reconfigureYearBInput(t){this.yearBInputControl.setValue(void 0),this.yearBInputControl.disable({emitEvent:!1}),t&&(this.availableEndYears=this.availableStartYears.slice(this.availableStartYears.lastIndexOf(t)+1),this.yearBInputControl.enable({emitEvent:!1}))}reconfigureUnitAInput(t){this.unitAInputControl.setValue(void 0),this.unitAInputControl.disable({emitEvent:!1}),t&&this.dataCatServ.getUnits(t).subscribe(i=>{this.availableAUnits=i.result.sort(),this.availableAUnits.unshift(void 0),this.unitAInputControl.enable({emitEvent:!1})})}reconfigureUnitBInput(t){this.unitBInputControl.setValue(void 0),this.unitBInputControl.disable({emitEvent:!1}),t&&this.dataCatServ.getUnits(t).subscribe(i=>{this.availableBUnits=i.result.sort(),this.availableBUnits.unshift(void 0),this.unitBInputControl.enable({emitEvent:!1})})}reconfigureOfferAInput(t){this.offerAInputControl.setValue(void 0),this.offerAInputControl.disable({emitEvent:!1}),this.yearAInputControl.value&&t&&this.dataCatServ.getOffers(this.yearAInputControl.value,t).subscribe(i=>{this.availableStartOffers=i.result.sort(),this.availableStartOffers.unshift(void 0),this.offerAInputControl.enable({emitEvent:!1})})}reconfigureOfferBInput(t){this.offerBInputControl.setValue(void 0),this.offerBInputControl.disable({emitEvent:!1}),this.yearBInputControl.value&&t&&this.dataCatServ.getOffers(this.yearBInputControl.value,t).subscribe(i=>{this.availableEndOffers=i.result.sort(),this.availableEndOffers.unshift(void 0),this.offerBInputControl.enable({emitEvent:!1})})}static{this.\u0275fac=function(i){return new(i||e)(C(R),C(L))}}static{this.\u0275cmp=g({type:e,selectors:[["app-student-migrations-form"]],inputs:{transformationBody:"transformationBody"},decls:47,vars:20,consts:[[3,"valueChange","formControl"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["panelClass","custom-select-panel",3,"valueChange","formControl"],["panelClass","custom-select-panel",3,"formControl"],[3,"value"]],template:function(i,o){i&1&&(n(0,"section")(1,"mat-form-field")(2,"mat-label"),s(3,"A\xF1o inicio"),r(),n(4,"mat-select",0),_("valueChange",function(v){return o.yearAValueChanged(v)}),p(5,Ae,2,2,"mat-option",1),r(),p(6,Pe,4,0,"mat-error",2),r(),n(7,"mat-form-field")(8,"mat-label"),s(9,"A\xF1o fin"),r(),n(10,"mat-select",0),_("valueChange",function(v){return o.yearBValueChanged(v)}),p(11,De,2,2,"mat-option",1),r(),p(12,Ue,4,0,"mat-error",2),r(),n(13,"mat-form-field")(14,"mat-label"),s(15,"Unidad inicio"),r(),n(16,"mat-select",3),_("valueChange",function(v){return o.unitAChanged(v)}),p(17,Ne,3,4,"mat-option",1),r()(),n(18,"mat-form-field")(19,"mat-label"),s(20,"Unidad fin"),r(),n(21,"mat-select",3),_("valueChange",function(v){return o.unitBChanged(v)}),p(22,Ve,3,4,"mat-option",1),r()(),n(23,"mat-form-field")(24,"mat-label"),s(25,"Carrera inicio"),r(),n(26,"mat-select",4),p(27,Re,3,4,"mat-option",1),r()(),n(28,"mat-form-field")(29,"mat-label"),s(30,"Carrera fin"),r(),n(31,"mat-select",4),p(32,qe,3,4,"mat-option",1),r()(),n(33,"mat-form-field")(34,"mat-label"),s(35,"Granularidad de destino"),r(),n(36,"mat-select",4)(37,"mat-option",5),s(38," Unidad "),r(),n(39,"mat-option",5),s(40," Carrera "),r()(),p(41,Ge,4,0,"mat-error",2),r(),n(42,"mat-form-field")(43,"mat-label"),s(44,"Sexo"),r(),n(45,"mat-select",4),p(46,Le,3,4,"mat-option",1),r()()()),i&2&&(a(4),l("formControl",o.yearAInputControl),a(),l("ngForOf",o.availableStartYears),a(),l("ngIf",o.yearAInputControl.hasError("required")),a(4),l("formControl",o.yearBInputControl),a(),l("ngForOf",o.availableEndYears),a(),l("ngIf",o.yearBInputControl.hasError("required")),a(4),l("formControl",o.unitAInputControl),a(),l("ngForOf",o.availableAUnits),a(4),l("formControl",o.unitBInputControl),a(),l("ngForOf",o.availableBUnits),a(4),l("formControl",o.offerAInputControl),a(),l("ngForOf",o.availableStartOffers),a(4),l("formControl",o.offerBInputControl),a(),l("ngForOf",o.availableEndOffers),a(4),l("formControl",o.modeInputControl),a(),l("value","dest_unit"),a(2),l("value","dest_offer"),a(2),l("ngIf",o.modeInputControl.hasError("required")),a(4),l("formControl",o.genderInputControl),a(),l("ngForOf",o.availableGenders))},dependencies:[T,S,M,V,y,I,O,w,x,G],styles:["section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;justify-content:center;column-gap:2rem}.mat-mdc-form-field[_ngcontent-%COMP%]{min-width:0}"]})}}return e})();function Ye(e,m){if(e&1&&(n(0,"mat-option",3),s(1),r()),e&2){let t=m.$implicit;l("value",t),a(),d(" ",t," ")}}function $e(e,m){e&1&&(n(0,"mat-error"),s(1," Campo "),n(2,"strong"),s(3,"requerido"),r()())}var me=(()=>{class e{constructor(t){this.filesServ=t,this.yearInputControl=new u(null,[b.required]),this.availableYears=[]}ngOnInit(){this.transformationBody.addControl("year",this.yearInputControl),this.filesServ.filesQuery(void 0,A.STUDENT_INSCRIPTIONS).subscribe(t=>{this.availableYears=t.result.map(i=>i.year).sort()})}static{this.\u0275fac=function(i){return new(i||e)(C(R))}}static{this.\u0275cmp=g({type:e,selectors:[["app-unit-inscriptions-form"]],inputs:{transformationBody:"transformationBody"},decls:7,vars:3,consts:[[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"]],template:function(i,o){i&1&&(n(0,"section")(1,"mat-form-field")(2,"mat-label"),s(3,"A\xF1o"),r(),n(4,"mat-select",0),p(5,Ye,2,2,"mat-option",1),r(),p(6,$e,4,0,"mat-error",2),r()()),i&2&&(a(4),l("formControl",o.yearInputControl),a(),l("ngForOf",o.availableYears),a(),l("ngIf",o.yearInputControl.hasError("required")))},dependencies:[T,S,M,V,y,I,O,w,x],styles:["section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;justify-content:center;column-gap:2rem}.mat-mdc-form-field[_ngcontent-%COMP%]{min-width:0}"]})}}return e})();function je(e,m){if(e&1&&(n(0,"mat-option",6),s(1),r()),e&2){let t=m.$implicit;l("value",t),a(),d(" ",t," ")}}function ke(e,m){e&1&&(n(0,"mat-error"),s(1," Campo "),n(2,"strong"),s(3,"requerido"),r()())}function He(e,m){if(e&1&&(n(0,"mat-option",6),s(1),r()),e&2){let t=m.$implicit;l("value",t),a(),d(" ",t," ")}}function ze(e,m){e&1&&(n(0,"mat-error"),s(1," Campo "),n(2,"strong"),s(3,"requerido"),r()())}function Qe(e,m){if(e&1&&(n(0,"mat-option",6),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function Je(e,m){if(e&1&&(n(0,"mat-option",6),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function Ke(e,m){if(e&1&&(n(0,"mat-option",6),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function We(e,m){if(e&1&&(n(0,"mat-option",6),s(1),c(2,"titlecase"),r()),e&2){let t,i=m.$implicit;l("value",i),a(),d(" ",h(2,2,(t=i)!==null&&t!==void 0?t:"Sin filtro")," ")}}function Xe(e,m){if(e&1&&(n(0,"mat-option",6),s(1),c(2,"titlecase"),r()),e&2){let t=m.$implicit;l("value",t.value),a(),d(" ",h(2,2,t.label)," ")}}function Ze(e,m){if(e&1&&(n(0,"mat-option",6),s(1),c(2,"titlecase"),r()),e&2){let t=m.$implicit;l("value",t._id),a(),d(" ",h(2,2,t.label)," ")}}var pe=(()=>{class e{constructor(t,i){this.filesServ=t,this.dataCatServ=i,this.yearAInputControl=new u(void 0,[b.required]),this.yearBInputControl=new u({value:void 0,disabled:!0},[b.required]),this.scholarshipTypeInputControl=new u({value:void 0,disabled:!0},[b.required]),this.unitAInputControl=new u({value:void 0,disabled:!0}),this.unitBInputControl=new u({value:void 0,disabled:!0}),this.genderInputControl=new u({value:void 0,disabled:!1}),this.offerAInputControl=new u({value:void 0,disabled:!0}),this.offerBInputControl=new u({value:void 0,disabled:!0}),this.availableStartYears=[],this.availableEndYears=[],this.availableAUnits=[],this.availableBUnits=[],this.availableStartOffers=[],this.availableEndOffers=[],this.availableGenders=[],this.schTypes=[]}ngOnInit(){this.yearAInputControl.valueChanges.subscribe(t=>{this.yearAValueChanged(t)}),this.unitAInputControl.valueChanges.subscribe(t=>{this.unitAChanged(t)}),this.yearBInputControl.valueChanges.subscribe(t=>{this.yearBValueChanged(t)}),this.unitBInputControl.valueChanges.subscribe(t=>{this.unitBChanged(t)}),this.transformationBody.addControl("yearA",this.yearAInputControl),this.transformationBody.addControl("yearB",this.yearBInputControl),this.transformationBody.addControl("schType",this.scholarshipTypeInputControl),this.transformationBody.addControl("unitA",this.unitAInputControl),this.transformationBody.addControl("unitB",this.unitBInputControl),this.transformationBody.addControl("sex",this.genderInputControl),this.transformationBody.addControl("offerA",this.offerAInputControl),this.transformationBody.addControl("offerB",this.offerBInputControl),this.filesServ.filesQuery(void 0,A.STUDENT_INSCRIPTIONS).subscribe(t=>{this.availableStartYears=t.result.map(i=>i.year).sort()}),this.dataCatServ.getGenders().subscribe(t=>{this.availableGenders=t.result,this.availableGenders.unshift({_id:void 0,label:"Sin filtro"})})}yearAValueChanged(t){this.reconfigureUnitAInput(t),this.reconfigureYearBInput(t)}yearBValueChanged(t){this.reconfigureUnitBInput(t),this.reconfigureScholarshipTypeInput(t)}unitAChanged(t){this.reconfigureOfferAInput(t)}unitBChanged(t){this.reconfigureOfferBInput(t)}reconfigureYearBInput(t){this.yearBInputControl.setValue(void 0),this.yearBInputControl.disable({emitEvent:!1}),t&&(this.availableEndYears=this.availableStartYears.slice(this.availableStartYears.lastIndexOf(t)+1),this.yearBInputControl.enable({emitEvent:!1}))}reconfigureUnitAInput(t){this.unitAInputControl.setValue(void 0),this.unitAInputControl.disable({emitEvent:!1}),t&&this.dataCatServ.getUnits(t).subscribe(i=>{this.availableAUnits=i.result.sort(),this.availableAUnits.unshift(void 0),this.unitAInputControl.enable({emitEvent:!1})})}reconfigureUnitBInput(t){this.unitBInputControl.setValue(void 0),this.unitBInputControl.disable({emitEvent:!1}),t&&this.dataCatServ.getUnits(t).subscribe(i=>{this.availableBUnits=i.result.sort(),this.availableBUnits.unshift(void 0),this.unitBInputControl.enable({emitEvent:!1})})}reconfigureOfferAInput(t){this.offerAInputControl.setValue(void 0),this.offerAInputControl.disable({emitEvent:!1}),this.yearAInputControl.value&&t&&this.dataCatServ.getOffers(this.yearAInputControl.value,t).subscribe(i=>{this.availableStartOffers=i.result.sort(),this.availableStartOffers.unshift(void 0),this.offerAInputControl.enable({emitEvent:!1})})}reconfigureOfferBInput(t){this.offerBInputControl.setValue(void 0),this.offerBInputControl.disable({emitEvent:!1}),this.yearBInputControl.value&&t&&this.dataCatServ.getOffers(this.yearBInputControl.value,t).subscribe(i=>{this.availableEndOffers=i.result.sort(),this.availableEndOffers.unshift(void 0),this.offerBInputControl.enable({emitEvent:!1})})}reconfigureScholarshipTypeInput(t){this.scholarshipTypeInputControl.setValue(void 0),this.scholarshipTypeInputControl.disable({emitEvent:!1}),this.schTypes=[],t&&this.dataCatServ.getFileTypes(t).subscribe(i=>{i.result.forEach(o=>{o==A.STUDENT_SCHOLARSHIPS_PROGRESAR&&this.schTypes.push({label:"progresar",value:o}),o==A.STUDENT_SCHOLARSHIPS_BELGRANO&&this.schTypes.push({label:"belgrano",value:o})}),this.scholarshipTypeInputControl.enable({emitEvent:!1})})}static{this.\u0275fac=function(i){return new(i||e)(C(R),C(L))}}static{this.\u0275cmp=g({type:e,selectors:[["app-student-scholarship-movements-form"]],inputs:{transformationBody:"transformationBody"},decls:43,vars:18,consts:[[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["panelClass","custom-select-panel",3,"formControl"],[1,"sch-type"],[1,"sex"],[3,"value"]],template:function(i,o){i&1&&(n(0,"section")(1,"mat-form-field")(2,"mat-label"),s(3,"A\xF1o inicio"),r(),n(4,"mat-select",0),p(5,je,2,2,"mat-option",1),r(),p(6,ke,4,0,"mat-error",2),r(),n(7,"mat-form-field")(8,"mat-label"),s(9,"A\xF1o fin"),r(),n(10,"mat-select",0),p(11,He,2,2,"mat-option",1),r(),p(12,ze,4,0,"mat-error",2),r(),n(13,"mat-form-field")(14,"mat-label"),s(15,"Unidad inicio"),r(),n(16,"mat-select",3),p(17,Qe,3,4,"mat-option",1),r()(),n(18,"mat-form-field")(19,"mat-label"),s(20,"Unidad fin"),r(),n(21,"mat-select",3),p(22,Je,3,4,"mat-option",1),r()(),n(23,"mat-form-field")(24,"mat-label"),s(25,"Carrera inicio"),r(),n(26,"mat-select",3),p(27,Ke,3,4,"mat-option",1),r()(),n(28,"mat-form-field")(29,"mat-label"),s(30,"Carrera fin"),r(),n(31,"mat-select",3),p(32,We,3,4,"mat-option",1),r()(),n(33,"mat-form-field",4)(34,"mat-label"),s(35,"Tipo de beca"),r(),n(36,"mat-select",3),p(37,Xe,3,4,"mat-option",1),r()(),n(38,"mat-form-field",5)(39,"mat-label"),s(40,"Sexo"),r(),n(41,"mat-select",3),p(42,Ze,3,4,"mat-option",1),r()()()),i&2&&(a(4),l("formControl",o.yearAInputControl),a(),l("ngForOf",o.availableStartYears),a(),l("ngIf",o.yearAInputControl.hasError("required")),a(4),l("formControl",o.yearBInputControl),a(),l("ngForOf",o.availableEndYears),a(),l("ngIf",o.yearBInputControl.hasError("required")),a(4),l("formControl",o.unitAInputControl),a(),l("ngForOf",o.availableAUnits),a(4),l("formControl",o.unitBInputControl),a(),l("ngForOf",o.availableBUnits),a(4),l("formControl",o.offerAInputControl),a(),l("ngForOf",o.availableStartOffers),a(4),l("formControl",o.offerBInputControl),a(),l("ngForOf",o.availableEndOffers),a(4),l("formControl",o.scholarshipTypeInputControl),a(),l("ngForOf",o.schTypes),a(4),l("formControl",o.genderInputControl),a(),l("ngForOf",o.availableGenders))},dependencies:[T,S,M,V,y,I,O,w,x,G],styles:["section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;justify-content:center;column-gap:2rem}mat-form-field[_ngcontent-%COMP%]{min-width:0}"]})}}return e})();var ii=["tagInput"];function ni(e,m){e&1&&(n(0,"mat-error"),s(1," Campo "),n(2,"strong"),s(3,"requerido"),r()())}function ri(e,m){e&1&&(n(0,"mat-error"),s(1," Limite de 256 caracteres alcanzado "),r())}function ai(e,m){e&1&&(n(0,"mat-error"),s(1," Limite de 512 caracteres alcanzado "),r())}function oi(e,m){if(e&1&&(n(0,"mat-option",15),s(1),r()),e&2){let t=m.$implicit;l("value",t.value),a(),d(" ",t.label," ")}}function li(e,m){if(e&1&&(n(0,"mat-option",15),s(1),r()),e&2){let t=m.$implicit;l("value",t._id),a(),N(t._id)}}function si(e,m){}function mi(e,m){if(e&1){let t=q();n(0,"section"),F(1,"app-chart",16),n(2,"button",17),_("click",function(){E(t);let o=P();return B(o.publish())}),s(3,"Publicar"),r()()}if(e&2){let t=P();a(),l("chart",t.previsualizedChart)("isPrevisualization",!0)}}function pi(e,m){e&1&&F(0,"app-shade-loading-spinner")}var fe=(()=>{class e{constructor(t,i){this.chartService=t,this.tagsServ=i,this.transformationBodyGroup=new K({}),this.transformationForm=new K({transformationHeader:new K({name:new u("",[b.required,b.maxLength(256)]),description:new u("",[b.maxLength(512)]),type:new u("",[b.required]),tags:new u([])}),transformationBody:this.transformationBodyGroup}),this.types=[{label:"Movimientos de estudiantes",value:D.STUDENT_MOVEMENTS},{label:"Inscripciones",value:D.STUDENT_INSCRIPTIONS},{label:"Migraciones",value:D.STUDENT_MIGRATIONS},{label:"Inscripciones a unidades",value:D.UNIT_INSCRIPTIONS},{label:"Movimientos cruzados con becas",value:D.STUDENT_SCH_MOVEMENTS}],this.formChangeHandlers={[D.STUDENT_MOVEMENTS]:oe,[D.STUDENT_INSCRIPTIONS]:le,[D.STUDENT_MIGRATIONS]:se,[D.UNIT_INSCRIPTIONS]:me,[D.STUDENT_SCH_MOVEMENTS]:pe},this.toggle=!1,this.loading=!1,this.clearFormEnabled=!1,this.allTags=[],i.getTags().subscribe({next:o=>{if(o.result.length>0){this.allTags=o.result;let f=this.allTags.findIndex(v=>v._id=="PUBLIC");if(f!=-1){let v=this.allTags[f];this.allTags.splice(f,1),this.allTags.unshift(v)}}else this.allTags=[]},error:o=>{},complete:()=>{}})}ngOnInit(){}previsualize(){let t=this.transformationForm.value;console.log(t),this.loading=!0,this.chartService.requestPrevisualization(t).subscribe({next:i=>{this.previsualizedChart=i},error:i=>{this.loading=!1},complete:()=>{this.loading=!1,this.clearFormEnabled=!0}})}publish(){this.loading=!0,this.chartService.requestTransformation(this.transformationForm.value).subscribe({next:t=>{this.previsualizedChart=t},error:t=>{this.loading=!1},complete:()=>{this.loading=!1,window.alert("Grafico publicado"),this.newPublicationCommand.next("new")}})}typeChanged(t){this.transformationBodyGroup=new K({}),this.transformationForm.setControl("transformationBody",this.transformationBodyGroup);let i=this.formAnchor.viewContainerRef;i.clear(),this.setFormComponent(i,this.formChangeHandlers[t])}setFormComponent(t,i){t.createComponent(i).setInput("transformationBody",this.transformationBodyGroup)}clearForm(){this.clearFormEnabled=!1,this.transformationForm.reset(),this.previsualizedChart=null}static{this.\u0275fac=function(i){return new(i||e)(C(Q),C(te))}}static{this.\u0275cmp=g({type:e,selectors:[["app-publish"]],viewQuery:function(i,o){if(i&1&&(j(ii,5),j(st,7)),i&2){let f;k(f=H())&&(o.tagInput=f.first),k(f=H())&&(o.formAnchor=f.first)}},inputs:{newPublicationCommand:"newPublicationCommand"},decls:34,vars:10,consts:[["type",""],[1,"main-form",3,"formGroup"],["formGroupName","transformationHeader"],["formControlName","name","type","text","matInput",""],[4,"ngIf"],["appearance","outline"],["formControlName","description","type","text","matInput",""],["panelClass","custom-select-panel","formControlName","type",3,"valueChange"],[3,"value",4,"ngFor","ngForOf"],["panelClass","custom-select-panel","formControlName","tags","multiple",""],["formGroupName","transformationBody"],["appElementAnchor",""],[1,"clear-control"],["type","button","mat-raised-button","","color","warn",3,"click","disabled"],["mat-button","",3,"click","disabled"],[3,"value"],[3,"chart","isPrevisualization"],["mat-button","",3,"click"]],template:function(i,o){if(i&1){let f=q();n(0,"form",1)(1,"form",2)(2,"mat-form-field")(3,"mat-label"),s(4,"Nombre"),r(),F(5,"input",3),p(6,ni,4,0,"mat-error",4)(7,ri,2,0,"mat-error",4),r(),n(8,"mat-form-field",5)(9,"mat-label"),s(10,"Descripcion"),r(),F(11,"textarea",6),p(12,ai,2,0,"mat-error",4),r(),n(13,"mat-form-field")(14,"mat-label"),s(15,"Tipo de grafico"),r(),n(16,"mat-select",7,0),_("valueChange",function($){return E(f),B(o.typeChanged($))}),p(18,oi,2,2,"mat-option",8),r()(),n(19,"mat-form-field")(20,"mat-label"),s(21,"Etiquetas"),r(),n(22,"mat-select",9),p(23,li,2,2,"mat-option",8),r()()(),n(24,"form",10),p(25,si,0,0,"ng-template",11),r(),n(26,"div",12)(27,"button",13),_("click",function(){return E(f),B(o.clearForm())}),s(28," Limpiar campos "),r()(),F(29,"mat-divider"),n(30,"button",14),_("click",function(){return E(f),B(o.previsualize())}),s(31," Previsualizar "),r()(),p(32,mi,4,2,"section",4)(33,pi,1,0,"app-shade-loading-spinner",4)}if(i&2){let f,v,$;l("formGroup",o.transformationForm),a(6),l("ngIf",(f=o.transformationForm.get("transformationHeader.name"))==null?null:f.hasError("required")),a(),l("ngIf",(v=o.transformationForm.get("transformationHeader.name"))==null?null:v.hasError("maxlength")),a(5),l("ngIf",($=o.transformationForm.get("transformationHeader.description"))==null?null:$.hasError("maxlength")),a(6),l("ngForOf",o.types),a(5),l("ngForOf",o.allTags),a(4),l("disabled",!o.clearFormEnabled),a(3),l("disabled",o.transformationForm.invalid),a(2),l("ngIf",o.previsualizedChart),a(),l("ngIf",o.loading)}},dependencies:[T,S,Tt,Bt,M,Ft,Mt,Ot,xt,z,At,at,y,I,O,w,x,Zt,mt,st],styles:[".main-form[_ngcontent-%COMP%]{width:80%;margin:auto}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-divider[_ngcontent-%COMP%]{margin:20px 0}.clear-control[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]})}}return e})();var ci=()=>[15,30,45];function hi(e,m){e&1&&(n(0,"th",13),s(1,"Nombre"),r())}function Ci(e,m){if(e&1&&(n(0,"td",14),s(1),r()),e&2){let t=m.$implicit;a(),N(t.name)}}function vi(e,m){e&1&&(n(0,"th",13),s(1,"Tipo"),r())}function _i(e,m){if(e&1&&(n(0,"td",14),s(1),r()),e&2){let t=m.$implicit;a(),N(t.type)}}function bi(e,m){e&1&&F(0,"tr",15)}function gi(e,m){if(e&1){let t=q();n(0,"tr",16),_("click",function(){let o=E(t).$implicit,f=P();return B(f.openDetails(o))}),r()}}function Si(e,m){if(e&1&&(n(0,"tr",17)(1,"td",18),s(2),r()()),e&2){P();let t=_t(4);a(2),d(' No se encontro un grafico con el filtro "',t.value,'" ')}}function Ii(e,m){e&1&&F(0,"app-shade-loading-spinner")}var ce=(()=>{class e{constructor(t,i,o){this.router=t,this.chartsServ=i,this.dialog=o,this.columnsToDisplay=["name","type"],this.isLoadingResults=!0}ngOnInit(){this.newPublicationEvent.subscribe(t=>{t=="new"&&this.refresh()})}ngAfterViewInit(){this.dataSource=new zt,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.refresh()}refresh(){this.isLoadingResults=!0,this.chartsServ.getCharts().subscribe({next:t=>{this.dataSource.data=t.result},error:()=>{},complete:()=>{this.isLoadingResults=!1}})}applyFilter(t){let i=t.target.value;this.dataSource.filter=i.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}openDetails(t){this.router.navigate(["home","publish",t._id])}static{this.\u0275fac=function(i){return new(i||e)(C(nt),C(Q),C(lt))}}static{this.\u0275cmp=g({type:e,selectors:[["app-publication-list"]],viewQuery:function(i,o){if(i&1&&(j(ot,5),j(Qt,5)),i&2){let f;k(f=H())&&(o.paginator=f.first),k(f=H())&&(o.sort=f.first)}},inputs:{newPublicationEvent:"newPublicationEvent"},decls:19,vars:6,consts:[["input",""],["matInput","",3,"keyup"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","row",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Seleccione pagina de graficos",3,"pageSizeOptions"],["mat-button","",3,"click"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"row",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,o){if(i&1){let f=q();n(0,"mat-form-field")(1,"mat-label"),s(2,"Filtrar"),r(),n(3,"input",1,0),_("keyup",function($){return E(f),B(o.applyFilter($))}),r()(),n(5,"table",2),ut(6,3),p(7,hi,2,0,"th",4)(8,Ci,2,1,"td",5),ft(),ut(9,6),p(10,vi,2,0,"th",4)(11,_i,2,1,"td",5),ft(),p(12,bi,1,0,"tr",7)(13,gi,1,0,"tr",8)(14,Si,3,1,"tr",9),r(),F(15,"mat-paginator",10),n(16,"button",11),_("click",function(){return E(f),B(o.refresh())}),s(17,"Refresh"),r(),p(18,Ii,1,0,"app-shade-loading-spinner",12)}i&2&&(a(5),l("dataSource",o.dataSource),a(7),l("matHeaderRowDef",o.columnsToDisplay),a(),l("matRowDefColumns",o.columnsToDisplay),a(2),l("pageSizeOptions",bt(5,ci)),a(3),l("ngIf",o.isLoadingResults))},dependencies:[S,z,at,y,I,Nt,Rt,Yt,qt,Vt,$t,Gt,Lt,jt,kt,Ht,ot,mt],styles:["table[_ngcontent-%COMP%]{width:100%}mat-paginator[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ebebeb}"]})}}return e})();function Bi(e,m){e&1&&(n(0,"mat-icon"),s(1,"add_chart"),r(),s(2," Generar nuevo "))}function Fi(e,m){e&1&&(n(0,"mat-icon"),s(1,"query_stats"),r(),s(2," Lista de graficos "))}var he=(()=>{class e{constructor(){this.newPublicationCommand=new ht}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=g({type:e,selectors:[["app-publications"]],decls:7,vars:2,consts:[["mat-align-tabs","center","dynamicHeight",""],["mat-tab-label",""],[3,"newPublicationCommand"],[3,"newPublicationEvent"]],template:function(i,o){i&1&&(n(0,"mat-tab-group",0)(1,"mat-tab"),p(2,Bi,3,0,"ng-template",1),F(3,"app-publish",2),r(),n(4,"mat-tab"),p(5,Fi,3,0,"ng-template",1),F(6,"app-publication-list",3),r()()),i&2&&(a(3),l("newPublicationCommand",o.newPublicationCommand),a(3),l("newPublicationEvent",o.newPublicationCommand.asObservable()))},dependencies:[rt,Jt,Kt,Wt,fe,ce]})}}return e})();function Ti(e,m){if(e&1){let t=q();n(0,"mat-card",1)(1,"mat-card-title"),s(2,"Detalles del grafico "),n(3,"app-editable-text-field",2),_("wasModified",function(o){E(t);let f=P();return B(f.updateChartName(o))}),r()(),n(4,"mat-card-content")(5,"h2"),s(6,"Descripcion"),r(),n(7,"p",3),s(8),r(),n(9,"h2"),s(10,"Tipo"),r(),n(11,"p"),s(12),r(),n(13,"h2"),s(14,"Fecha de creaci\xF3n"),r(),n(15,"p"),s(16),c(17,"date"),r(),n(18,"h2"),s(19,"Ultima actualizaci\xF3n"),r(),n(20,"p"),s(21),c(22,"date"),r(),n(23,"h2"),s(24,"Tags"),r(),n(25,"p")(26,"app-modifiable-tags",4),_("wasModified",function(o){E(t);let f=P();return B(f.tagsModified(o))}),r()(),n(27,"h2"),s(28,"Informacion contenida"),r(),n(29,"p"),s(30),c(31,"json"),r(),n(32,"button",5),_("click",function(){E(t);let o=P();return B(o.openDeleteDialog())}),n(33,"mat-icon",6),s(34,"delete"),r(),s(35," Borrar "),r()()()}if(e&2){let t=P();a(3),l("isTextArea",!1)("value",t.chart.name),a(5),d(" ",t.chart.description," "),a(4),N(t.chart.type),a(4),N(h(17,8,t.chart.createdAt)),a(5),N(h(22,10,t.chart.updatedAt)),a(5),l("tags",t.chart.tags),a(4),N(h(31,12,t.chart.structure))}}var Ce=(()=>{class e{constructor(t,i,o,f){this.actRoute=t,this.chartService=i,this.dialog=o,this.router=f}ngOnInit(){this.actRoute.params.subscribe({next:t=>{this.requestChartData(t)},error:()=>{},complete:()=>{}})}requestChartData(t){this.chartService.getChart(t.id).subscribe({next:i=>{this.handleChartData(i)},error:()=>{},complete:()=>{}})}handleChartData(t){this.chart=t.result}openDeleteDialog(){let t=this.dialog.open(ee);t.componentInstance.title=`\xBFBorrar el grafico ${this.chart.name}?`,t.componentInstance.op1="Borrar",t.componentInstance.op2="Cancelar",t.componentInstance.result.subscribe(i=>{i=="Borrar"?this.chartService.deleteChart(this.chart._id).subscribe({next:()=>{},error:()=>{window.alert("No se pudo eliminar el grafico"),t.close()},complete:()=>{t.close(),this.router.navigate(["home","publish"])}}):t.close()})}tagsModified(t){this.chart.tags=t,this.chartService.updateChart(this.chart._id,this.chart).subscribe(i=>{this.chart=i.result})}updateChartName(t){this.chart.name=t,this.chartService.updateChart(this.chart._id,this.chart).subscribe(i=>{this.chart=i.result})}static{this.\u0275fac=function(i){return new(i||e)(C(Et),C(Q),C(lt),C(nt))}}static{this.\u0275cmp=g({type:e,selectors:[["app-publication-details"]],decls:1,vars:1,consts:[["appearance","outlined",4,"ngIf"],["appearance","outlined"],[3,"wasModified","isTextArea","value"],[2,"white-space","pre-wrap"],[3,"wasModified","tags"],["mat-raised-button","",2,"color","red",3,"click"],["color","warn"]],template:function(i,o){i&1&&p(0,Ti,36,14,"mat-card",0),i&2&&l("ngIf",o.chart)},dependencies:[S,z,rt,Pt,Ut,Dt,ie,ne,St,gt],styles:["mat-card-content[_ngcontent-%COMP%]{padding-left:1rem}"]})}}return e})();var Mi=[{path:"",component:he},{path:":id",component:Ce}],ve=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=it({type:e})}static{this.\u0275inj=et({imports:[ct.forChild(Mi),ct]})}}return e})();var Hn=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=it({type:e})}static{this.\u0275inj=et({imports:[It,ve,wt,Xt,ae,re]})}}return e})();export{Hn as PublishModule};
